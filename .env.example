# ============================================================
# OCR Pipeline 环境配置文件
# ============================================================
# 复制此文件为 .env 并根据实际情况修改配置
# 命令: cp .env.example .env

# ============================================================
# 前端配置
# ============================================================

# 前端服务端口
FRONTEND_PORT=8082

# 后端 API 地址（前端访问）
# 格式: http://YOUR_SERVER_IP:8010/api
# 如果留空，将自动使用访问前端的主机地址
VUE_APP_API_BASE_URL=http://localhost:8010/api

# Label Studio 地址（前端访问）
VUE_APP_LABEL_STUDIO_URL=http://localhost:8081

# ============================================================
# 后端配置
# ============================================================

# Label Studio 服务端口
LABEL_STUDIO_PORT=8081

# ============================================================
# Label Studio API 配置（后端推送任务用）
# ============================================================

# Label Studio API Token 获取步骤:
# 1. 访问 http://localhost:8081
# 2. 登录后点击右上角头像 → Account & Settings
# 3. 进入 Personal Access Token 页面
# 4. 点击 "Create New Token" 生成新的 API Token
# 5. 复制生成的 Token (JWT 格式，以 eyJ 开头)
# 6. 粘贴到下方 LABEL_STUDIO_API_KEY
# 7. 修改 .env 后需重启服务: docker compose restart backend celery

# Label Studio 服务地址（容器内部访问，使用内部端口 8080）
LABEL_STUDIO_URL=http://label-studio:8080

# Label Studio Personal Access Token (必填)
LABEL_STUDIO_API_KEY=

# Label Studio 项目 ID (在项目设置中查看)
LABEL_STUDIO_PROJECT_ID=1

# Backend 外部访问 URL (Label Studio 访问图片用)
# 格式: http://YOUR_SERVER_IP:8010
# 必须是 Label Studio 容器能访问的地址
# 如果使用宿主机 IP: http://10.4.34.108:8010
BACKEND_EXTERNAL_URL=http://localhost:8010

# MinerU 模型源
# 可选值: modelscope, huggingface
MINERU_MODEL_SOURCE=modelscope

# ============================================================
# Celery Worker 配置
# ============================================================

# Celery Worker 并发数
# 建议设置为 CPU 核心数的 1-2 倍
CELERY_CONCURRENCY=2

# ============================================================
# GPU 配置（仅在使用 docker-compose.gpu.yml 时生效）
# ============================================================

# GPU 数量
GPU_COUNT=1

# GPU 设备 ID（多个 GPU 时用逗号分隔，如: 0,1）
# 使用 "all" 表示使用所有可用 GPU
GPU_DEVICE_IDS=0

# ============================================================
# 数据库配置（一般不需要修改）
# ============================================================

POSTGRES_DB=ocr_pipeline_db
POSTGRES_USER=test
POSTGRES_PASSWORD=test1234
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ============================================================
# Redis 配置（一般不需要修改）
# ============================================================

REDIS_HOST=redis
REDIS_PORT=6379
